{% extends 'base.html' %}
{% load static %}

{% block title %}Community Campaigns - EcoLearn{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold text-center mb-8">🌍 Community Campaigns</h1>
    
    <!-- Debug Info -->
    <div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-6">
        <strong>Debug:</strong> 
        Upcoming: {{ upcoming_campaigns|length }}, 
        Ongoing: {{ ongoing_campaigns|length }}, 
        Past: {{ past_campaigns|length }}
    </div>

    <!-- Upcoming Campaigns -->
    {% if upcoming_campaigns %}
    <div class="mb-12">
        <h2 class="text-2xl font-bold mb-6">�� Upcoming Campaigns</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for campaign in upcoming_campaigns %}
            <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500">
                <h3 class="text-xl font-bold mb-2">{{ campaign.title }}</h3>
                <p class="text-gray-600 mb-4">{{ campaign.description|truncatewords:20 }}</p>
                <div class="text-sm text-gray-600 mb-4">
                    <div>📍 {{ campaign.location }}</div>
                    <div>📅 {{ campaign.start_date|date:"M d, Y" }}</div>
                    <div>⏰ {{ campaign.start_date|time:"g:i A" }}</div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded text-sm">
                        👥 {{ campaign.participant_count }} joined
                    </span>
                    <a href="{% url 'community:campaign_detail' campaign.id %}" 
                       class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                        View Details
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- No Campaigns Message -->
    {% if not upcoming_campaigns and not ongoing_campaigns and not past_campaigns %}
    <div class="text-center py-16">
        <div class="text-6xl mb-4">🌱</div>
        <h3 class="text-2xl font-bold mb-4">No Campaigns Yet</h3>
        <p class="text-gray-600 mb-8">Community campaigns will appear here once created.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
